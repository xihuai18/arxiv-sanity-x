# Arxiv Sanity Configuration Template
# Copy this file to .env and modify as needed
# All config items have default values, only set items you want to override

# =============================================================================
# Data Directory Configuration
# =============================================================================
# ARXIV_SANITY_DATA_DIR=/path/to/data
# ARXIV_SANITY_SUMMARY_DIR=/path/to/data/summary
# ARXIV_SANITY_LOG_DIR=/path/to/data/logs

# =============================================================================
# Service Configuration
# =============================================================================
# ARXIV_SANITY_HOST=http://localhost:55555
# ARXIV_SANITY_SERVE_PORT=55555
# ARXIV_SANITY_LITELLM_PORT=53000

# =============================================================================
# LLM Configuration
# =============================================================================
# ARXIV_SANITY_LLM_BASE_URL=http://localhost:53000
# ARXIV_SANITY_LLM_API_KEY=your-api-key
# ARXIV_SANITY_LLM_NAME=deepseek-v3.2
# ARXIV_SANITY_LLM_SUMMARY_LANG=zh
# ARXIV_SANITY_LLM_FALLBACK_MODELS=glm-4.7,mimo-v2-flash
# ARXIV_SANITY_LLM_LITELLM_VERBOSE=false  # LiteLLM verbose logging mode

# =============================================================================
# Extract Info LLM Configuration (for uploaded paper metadata extraction)
# =============================================================================
# ARXIV_SANITY_EXTRACT_MODEL_NAME=glm-4.7-flash  # Simpler task, can use smaller model
# ARXIV_SANITY_EXTRACT_BASE_URL=           # Empty uses LLM_BASE_URL
# ARXIV_SANITY_EXTRACT_API_KEY=            # Empty uses LLM_API_KEY
# ARXIV_SANITY_EXTRACT_TEMPERATURE=0.1
# ARXIV_SANITY_EXTRACT_MAX_TOKENS=8192  # Reasoning models need more tokens for thinking
# ARXIV_SANITY_EXTRACT_TIMEOUT=60

# =============================================================================
# Embedding Configuration
# =============================================================================
# ARXIV_SANITY_EMBED_PORT=54000
# ARXIV_SANITY_EMBED_USE_LLM_API=false
# ARXIV_SANITY_EMBED_MODEL_NAME=qwen3-embedding:0.6b
# ARXIV_SANITY_EMBED_API_BASE=
# ARXIV_SANITY_EMBED_API_KEY=

# =============================================================================
# MinerU PDF Parsing Configuration
# =============================================================================
# ARXIV_SANITY_MINERU_ENABLED=true
# ARXIV_SANITY_MINERU_PORT=52000
# ARXIV_SANITY_MINERU_BACKEND=api  # pipeline, vlm-http-client, api
# ARXIV_SANITY_MINERU_DEVICE=cuda  # cuda, cpu (for pipeline backend)
# ARXIV_SANITY_MINERU_MAX_WORKERS=2
# ARXIV_SANITY_MINERU_MAX_VRAM=4
# MINERU_API_KEY=your-mineru-api-key
# MINERU_API_POLL_INTERVAL=5
# MINERU_API_TIMEOUT=600

# =============================================================================
# Summary Configuration
# =============================================================================
# ARXIV_SANITY_SUMMARY_SOURCE=html  # html, mineru
# ARXIV_SANITY_SUMMARY_HTML_SOURCES=ar5iv,arxiv
# ARXIV_SANITY_SUMMARY_MIN_CHINESE_RATIO=0.25
# ARXIV_SANITY_SUMMARY_DEFAULT_SEMANTIC_WEIGHT=0.5
# ARXIV_SANITY_SUMMARY_BATCH_NUM=500

# =============================================================================
# Email Configuration
# =============================================================================
# ARXIV_SANITY_EMAIL_FROM_EMAIL=your@email.com
# ARXIV_SANITY_EMAIL_SMTP_SERVER=smtp.example.com
# ARXIV_SANITY_EMAIL_SMTP_PORT=465
# ARXIV_SANITY_EMAIL_USERNAME=your-username
# ARXIV_SANITY_EMAIL_PASSWORD=your-password

# =============================================================================
# SVM Classifier Configuration
# =============================================================================
# ARXIV_SANITY_SVM_C=0.02
# ARXIV_SANITY_SVM_MAX_ITER=5000
# ARXIV_SANITY_SVM_TOL=0.001
# ARXIV_SANITY_SVM_NEG_WEIGHT=5.0

# =============================================================================
# Logging Configuration
# =============================================================================
# ARXIV_SANITY_LOG_LEVEL=WARNING  # DEBUG, INFO, WARNING, ERROR
# ARXIV_SANITY_ACCESS_LOG=false

# =============================================================================
# Feature Toggles
# =============================================================================
# ARXIV_SANITY_ENABLE_SWAGGER=false

# =============================================================================
# Daemon Scheduled Tasks Configuration
# =============================================================================
# Paper fetching
# ARXIV_SANITY_DAEMON_FETCH_NUM=2000        # Number of papers to fetch each time
# ARXIV_SANITY_DAEMON_FETCH_MAX=1000        # Max papers per API query

# Summary generation
# ARXIV_SANITY_DAEMON_SUMMARY_NUM=200       # Number of summaries to generate each time
# ARXIV_SANITY_DAEMON_SUMMARY_WORKERS=2     # Summary generation concurrent workers
# ARXIV_SANITY_DAEMON_ENABLE_SUMMARY=true   # Enable summary generation
# ARXIV_SANITY_DAEMON_ENABLE_EMBEDDINGS=true # Enable embedding computation

# Priority queue
# ARXIV_SANITY_DAEMON_ENABLE_PRIORITY_QUEUE=true  # Enable priority queue
# ARXIV_SANITY_DAEMON_ENABLE_SUMMARY_QUEUE=true   # Enable summary queue
# ARXIV_SANITY_DAEMON_PRIORITY_DAYS=2.0           # Prioritize papers from last N days
# ARXIV_SANITY_DAEMON_PRIORITY_LIMIT=100          # Priority queue max size

# Email
# ARXIV_SANITY_DAEMON_EMAIL_DRY_RUN=false   # Email test mode (no actual sending)
# ARXIV_SANITY_DAEMON_EMAIL_API_WORKERS=8   # Email sending concurrent API calls

# Backup
# ARXIV_SANITY_DAEMON_ENABLE_GIT_BACKUP=true # Enable git backup

# Scheduling
# ARXIV_SANITY_DAEMON_TIMEZONE=Asia/Shanghai # Scheduler timezone

# =============================================================================
# Huey Task Queue Configuration
# =============================================================================
# ARXIV_SANITY_HUEY_DB_PATH=              # Huey database path (default: data_dir/huey.db)
# ARXIV_SANITY_HUEY_WORKERS=4             # Huey worker count
# ARXIV_SANITY_HUEY_WORKER_TYPE=thread    # Huey worker type (thread/process/greenlet)
# ARXIV_SANITY_HUEY_MAX_MEMORY_MB=0       # Max memory for Huey consumer (MB, 0=unlimited)
# ARXIV_SANITY_HUEY_SUMMARY_PRIORITY_HIGH=100  # High priority summary tasks
# ARXIV_SANITY_HUEY_SUMMARY_PRIORITY_LOW=10    # Low priority summary tasks
# ARXIV_SANITY_HUEY_SUMMARY_REPAIR_ON_START=true  # Repair stuck tasks on startup
# ARXIV_SANITY_HUEY_SUMMARY_REPAIR_TTL=3600       # Repair task TTL (seconds)
# ARXIV_SANITY_HUEY_SUMMARY_REPAIR_REQUEUE=false  # Requeue on repair
# ARXIV_SANITY_HUEY_SUMMARY_REPAIR_ENABLE=true    # Enable periodic repair
# ARXIV_SANITY_HUEY_SUMMARY_REPAIR_INTERVAL=900   # Repair check interval (seconds)
# ARXIV_SANITY_HUEY_FORCE_REPAIR=false            # Force repair
# ARXIV_SANITY_HUEY_TASKS_SSE_ENABLED=true        # Enable task SSE event push

# =============================================================================
# Web Application Configuration
# =============================================================================
# ARXIV_SANITY_CACHE_PAPERS=false         # Cache paper data in memory
# ARXIV_SANITY_WARMUP_DATA=true           # Warm up data cache on startup
# ARXIV_SANITY_WARMUP_ML=true             # Warm up ML models on startup
# ARXIV_SANITY_ENABLE_SCHEDULER=true      # Enable APScheduler tasks
# ARXIV_SANITY_RELOAD=false               # Development hot reload mode
# ARXIV_SANITY_SECRET_KEY=                # Flask session secret key
# ARXIV_SANITY_COOKIE_SAMESITE=Lax        # Cookie SameSite policy
# ARXIV_SANITY_COOKIE_SECURE=false        # Cookie Secure flag
# ARXIV_SANITY_MAX_CONTENT_LENGTH=52428800 # Max request body size (bytes, default 50MB for PDF uploads)
# ARXIV_SANITY_SUMMARY_CACHE_STATS_REFRESH=1800  # Summary cache stats refresh interval (seconds)
# ARXIV_SANITY_ENABLE_CACHE_STATUS=false  # Enable /cache_status debug page

# =============================================================================
# Lock Configuration
# =============================================================================
# ARXIV_SANITY_SUMMARY_LOCK_STALE_SEC=600   # Summary lock expiry time (seconds)
# ARXIV_SANITY_MINERU_LOCK_STALE_SEC=3600   # MinerU lock expiry time (seconds)

# =============================================================================
# Database Configuration
# =============================================================================
# ARXIV_SANITY_DB_TIMEOUT=120               # SQLite connection timeout (seconds)
# ARXIV_SANITY_DB_MAX_RETRIES=5             # Database operation max retries
# ARXIV_SANITY_DB_RETRY_BASE_SLEEP=0.2      # Retry base wait time (seconds)

# =============================================================================
# Search Configuration
# =============================================================================
# ARXIV_SANITY_SEARCH_RET_NUM=100           # Papers per page
# ARXIV_SANITY_SEARCH_MAX_RESULTS=1000      # Search max results (default: ret_num * 10)

# =============================================================================
# Recommendation System Configuration (email recommendations, etc.)
# =============================================================================
# ARXIV_SANITY_RECO_API_BASE_URL=           # Recommendation API base URL (empty = use local service)
# ARXIV_SANITY_RECO_API_TIMEOUT=120.0       # Recommendation API timeout (seconds)
# ARXIV_SANITY_RECO_API_LIMIT=1000          # Candidate papers limit per query
# ARXIV_SANITY_RECO_MODEL_C=0.1             # Recommendation model C parameter
# ARXIV_SANITY_RECO_NUM_THREADS=0           # Thread count (0=auto)
# ARXIV_SANITY_RECO_MAX_THREADS=192         # Max thread count limit
# ARXIV_SANITY_RECO_WEB_NAME="Arxiv Sanity X"  # Brand name in email templates

# =============================================================================
# arXiv Data Collection Configuration
# =============================================================================
# ARXIV_SANITY_ARXIV_CORE_TAGS=cs.AI,cs.LG,stat.ML        # Core AI tags
# ARXIV_SANITY_ARXIV_LANG_TAGS=cs.CL,cs.IR,cs.CV          # Language/vision tags
# ARXIV_SANITY_ARXIV_AGENT_TAGS=cs.MA,cs.RO,cs.HC,cs.GT,cs.NE  # Agent-related tags
# ARXIV_SANITY_ARXIV_APP_TAGS=cs.SE,cs.CY                 # Application tags
# ARXIV_SANITY_ARXIV_EMPTY_RESPONSE_FALLBACK=3            # Fallback count after empty response
# ARXIV_SANITY_ARXIV_API_TIMEOUT=20                       # arXiv API request timeout (seconds)

# =============================================================================
# Gunicorn Server Configuration
# =============================================================================
# ARXIV_SANITY_GUNICORN_WORKERS=2          # Gunicorn worker process count
# ARXIV_SANITY_GUNICORN_THREADS=2          # Threads per worker
# ARXIV_SANITY_GUNICORN_PRELOAD=true       # Preload app (copy-on-write shared memory)
# ARXIV_SANITY_GUNICORN_PRELOAD_CACHES=true # Preload data caches in master process (requires preload=true)
# ARXIV_SANITY_GUNICORN_EXTRA_ARGS=--reload  # Extra Gunicorn arguments
# ARXIV_SANITY_GUNICORN_MAX_MEMORY_MB=0    # Max memory per worker (MB, 0=unlimited, enables periodic restart)
